
---

# Custom Syscalls in xv6 (MIT RISC-V)

This repository contains the implementation of two custom **system calls** added to the MIT xv6 (RISC-V) operating system as part of operating systems experimentation:

* `schedtest` â€” Scheduler Statistics Syscall
* `psinfo` â€” Process Information Syscall
* `getmeminfo` - Syscall that returns memory usage per process
Both syscalls are implemented at the kernel level, exported to user space, and tested successfully in QEMU.

---

## âœ… Implemented Syscalls

### 1. `schedtest` â€” Scheduler Statistics

#### ğŸ”¹ Description

Reports the **total number of context switches** that have occurred since the operating system booted.

#### â–¶ï¸ Usage (inside xv6 shell)

```sh
schedtest
```

#### âœ… Example Output

```
Total context switches since boot: 46
```

#### ğŸ¯ Purpose

* Kernel introspection
* Analyze scheduling behavior
* Evaluate performance overhead
* Understand OS scheduling internals

---

### 2. `psinfo` â€” Process Information

#### ğŸ”¹ Description

Displays all currently active processes along with their:

* Process ID (PID)
* Execution state
* Program name

#### â–¶ï¸ Usage (inside xv6 shell)

```sh
psinfo
```

#### âœ… Example Output

```
PID     STATE   NAME
1       SLEEP   init
2       SLEEP   sh
3       RUN     psinfo
```

#### ğŸ§  Process State Meanings

| State  | Description                 |
| ------ | --------------------------- |
| RUN    | Currently executing         |
| RUNN   | Ready to run                |
| SLEEP  | Waiting for an event        |
| ZOMB   | Terminated, not yet cleaned |
| UNUSED | Empty process slot          |

#### ğŸ¯ Purpose

* View kernel process table
* OS debugging
* Learn process lifecycle
* Monitor scheduler activity

---

## ğŸ”§ Build & Run Instructions

### Step 1: Build xv6

```bash
make clean
make qemu
```

### Step 2: Inside xv6 shell, run:

```sh
schedtest
psinfo
```

---

## ğŸ—‚ Files Modified

### Kernel

* `kernel/syscall.h` â†’ Assigned syscall numbers
* `kernel/syscall.c` â†’ Registered new syscalls
* `kernel/sysproc.c` â†’ Implemented `sys_schedtest` and `sys_psinfo`
* `kernel/proc.c` â†’ Scheduler instrumentation (if applicable)

### User Space

* `user/user.h` â†’ Added syscall prototypes
* `user/usys.S` â†’ Added syscall stubs
* `user/schedtest.c` â†’ User program
* `user/psinfo.c` â†’ User program

### Build System

* `Makefile` â†’ Added `_schedtest` and `_psinfo` to `UPROGS`

---

## âœ… Status

| Component      | Status |
| -------------- | ------ |
| Syscall wiring | âœ…      |
| Kernel logic   | âœ…      |
| User wrappers  | âœ…      |
| Output tested  | âœ…      |
| Clean build    | âœ…      |

---

## âš  Notes for Contributors

* Do **not** modify syscall numbers unless strictly required
* Always run:

```sh
make clean
make qemu
```

after pulling updates

* Any missing registration in `syscall.c` or `usys.S` may cause xv6 to freeze at boot

---





